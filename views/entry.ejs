<%-include("head")-%>

<%-include("navigationGeneral")-%>


<style>
    .box {
      border: 1px solid black;
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
      position: absolute; top: 100px; left: 42%;
      padding: 20px;
      border-radius: 10px;


    }
   
  
  </style>
  
<script>
document.addEventListener('DOMContentLoaded', () => {
  const addNameButton = document.querySelector('button[onclick="addName()"]');
  const selectElement = document.querySelector('select');
  const formElement = document.querySelector('form[name="myForm"]');

  

  // Set the display and vertical-align styles of the select element
  selectElement.style.display = 'inline-block';
  selectElement.style.verticalAlign = 'top';

  // Set the display and vertical-align styles of the addNameButton
  addNameButton.style.display = 'inline-block';
  addNameButton.style.verticalAlign = 'top';
  addNameButton.style.marginLeft = '10px';

  // Show or hide the addNameButton based on the number of options in the select element
  if (selectElement.options.length > 0) {
    addNameButton.style.display = 'inline-block';
  } else {
    addNameButton.style.display = 'none';
  }

  addNameButton.addEventListener('click', (event) => {
    event.preventDefault();
    // The rest of the code goes here
    const selectedOption = selectElement.options[selectElement.selectedIndex];
  
    // Create a new element to display the selected value
    const newElement = document.createElement('div');
    newElement.textContent = `${selectedOption.textContent}`;
    newElement.insertAdjacentHTML('beforeend', ' <button>-</button>');
    newElement.setAttribute('user_id', selectedOption.value);
  
    // Insert the new element after the addNameButton
    addNameButton.parentNode.insertBefore(newElement, addNameButton.nextSibling);

    // Remove the selected option from the select element
    selectElement.options.remove(selectElement.selectedIndex);

    // Show or hide the addNameButton based on the number of options in the select element
    if (selectElement.options.length > 0) {
      addNameButton.style.display = 'inline-block';
    } else {
      addNameButton.style.display = 'none';
    }

    // Add a persistent event listener to the "-" button
    const removeButton = newElement.querySelector('button');
    removeButton.addEventListener('click', (event) => {
      event.preventDefault();
      // Remove the parent element of the button (the div containing the name and the button)
      removeButton.parentNode.remove();

      // Add the option back to the select element
      const value = newElement.getAttribute('data-value');
      const text = newElement.textContent.substring(0, newElement.textContent.length - 1);
      const option = new Option(text, value);
      selectElement.options.add(option);

      // Show or hide the addNameButton based on the number of options in the select element
      if (selectElement.options.length > 0) {
        addNameButton.style.display = 'inline-block';
      } else {
        addNameButton.style.display = 'none';
      }
    });
  });
});




</script>
  
  
<div class="box">
  <form name="myForm" id="entry">
    <label>Teacherâ€™s name</label>
    <input type="text" value="<%= teacherName %>" disabled>
    <br>
    <label>Subject:</label>
    <input type="text" value="<%= subject %>" disabled>
    <br>
    <label>Class:</label>
    <input type="text" value="<%= classNumber %>" disabled>
    <br>
    <label>Lesson number:</label>
    <input type="text" value="<%= taughtHours %>" disabled>
    <br>
    <label>notes:</label>
    <input type="text">

    <br>
    <label>absence:</label>
   
      <select>
        <% users.forEach((user) => { %>
          <option value="<%= user.id_user %>"><%= user.firstName %> <%= user.lastName %></option>
        <% }); %>
      </select>
      <button onclick="addName()">+</button>
   
    
    <br>
    <input type="submit" value="Odeslat">
    </form>
      
</div>



<%-include("footer")-%>